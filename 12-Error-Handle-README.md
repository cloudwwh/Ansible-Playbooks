Error Handling 

limit Flag:

When playbook fail to execute on any host, a file is created containing names of each host where the playbook failed. This file may be 
used with --limit flag to execute only against hosts where the playbook failed. Ansible may be configured to continue execution even
after an error occurs using the 'ignore_errors' keyword.Ansible allows failure conditions to be defined using the 'failed_when' keyword.
There is also 'changed_when' that allows an override of what Ansible considers changed

Example:

ansible-playbook site.yml --limit datacenter2

ansible-playbook site.yml --limit @retry_hosts.txt

ansible-playbook site.yml –limit @site.retry

TRY:

ansible-playbook -i inv error1.yml

In error1.yml, change the parameter from alliswell to allisnotwell and run it again to pass the execution

To retry using limit flag
-------------------------

ansible-playbook -i inv error1.yml --limit @error1.retry   (error1.retry is autogenerated)

ignore_unreachable - You can ignore a task failure due to the host instance being ‘UNREACHABLE’ with the ignore_unreachable keyword. 
Ansible ignores the task errors, but continues to execute future tasks against the unreachable host. For example, at the task level (ignore_unreachable: yes)

ignore_errors - By default Ansible stops executing tasks on a host when a task fails on that host. You can use ignore_errors to continue on in spite of the failure (ignore_errors: yes)

failed_when - Ansible lets you define what “failure” means in each task using the failed_when conditional. As with all conditionals in Ansible, lists of multiple failed_when conditions are joined with an implicit and, meaning the task only fails when all conditions are met. If you want to trigger a failure when any of the conditions is met, you must define the conditions in a string with an explicit or operator.

      register: cmd_output
      
      failed_when: "'FAIL' in cmd_output.stdout"

changed_when - Ansible lets you define when a particular task has “changed” a remote node using the changed_when conditional. This lets you determine, based on return codes or output, whether a change should be reported in Ansible statistics and whether a handler should be triggered or not. As with all conditionals in Ansible, lists of multiple changed_when conditions are joined with an implicit and, meaning the task only reports a change when all conditions are met. If you want to report a change when any of the conditions is met, you must define the conditions in a string with an explicit or operator.

      register: cmd_output
      
      changed_when: "'CHANGED' in cmd_output.stdout"
  
Example tasks1:

  - name: Report 'changed' when the return code is not equal to 2
  
    ansible.builtin.shell: /usr/bin/billybass --mode="take me to the river"
    
    register: bass_result
    
    changed_when: "bass_result.rc != 2"
    
  - name: This will never report 'changed' status
  
    ansible.builtin.shell: wall 'beep'
    
    changed_when: False

  
Example tasks2:

- name: Combine multiple conditions to override 'changed' result

  ansible.builtin.command: /bin/fake_command
  
  register: result
  
  ignore_errors: True
  
  changed_when:
  
    - '"ERROR" in result.stderr'
    
    - result.rc == 2

